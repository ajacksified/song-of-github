<!DOCTYPE html>
<html>
  <head>
    <title>Song of GitHub - Let me sing you the song of my contributions.</title>

    <link href='//fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet'>
    <link href='/css/style.css' rel='stylesheet'>
  </head>

  <body>
    <section id='main'>
      {{^embeddable}}
        <h1>Song of GitHub</h1>
        <h2>Let me sing you the song of my contributions.</h2>

        <p>(Sound on, please.)</p>

        <form action='/' method='GET'>
          <label for='username'>(comma-separated) GitHub username(s):</label>
          <input name='username' value='{{namesString}}' size='50'>
          <button type='submit'>Play that sassy jazz</button>
        </form>
      {{/embeddable}}

      {{#calendarData}}
        <div id={{key}}>
          <h3>{{key}} in C Major.</h3>

          <table id='visualize'>
            <tr id='day0'></tr>
            <tr id='day1'></tr>
            <tr id='day2'></tr>
            <tr id='day3'></tr>
            <tr id='day4'></tr>
            <tr id='day5'></tr>
            <tr id='day6'></tr>
          </table>

          <p><a href='/?username={{key}}'>Share this (solo).</a></p>
        </div>
      {{/calendarData}}

    {{^embeddable}}
      {{#anyValidNames}}
        <p><h3><a href='/?username={{{namesString}}}'>Share this (all parts).</a></h3></p>
      {{/anyValidNames}}

      <footer>
        <a href='https://github.com/ajacksified/song-of-github'>Get the code on GitHub.</a>
        By <a href='http://twitter.com/ajacksified'>@ajacksified</a> and <a href='https://github.com/ajacksified/song-of-github/contributors'>some amazing contributors</a>.
        Uses the super cool <a href='http://mudcu.be/midi-js/'>Midi.js</a>.
      </footer>
    {{/embeddable}}

    {{#embeddable}}
      <p><a href='http://song-of-github.herokuapp.com'>Listen to your song.</a></p>
    {{/embeddable}}

    </section>

    <script src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js'></script>

    <script src='/js/MIDI.min.js'></script>
    <script src='/js/Base64.js'></script>
    <script src='/js/base64binary.js'></script>

    {{! Dump GitHub SVG data into the DOM to let the user's browser do the
        parsing. A user's SVG is accessible with the selector "#{user}-data".}}
    <div style="display:none;">
      {{#calendarData}}
        <div id="{{key}}-data">
          {{{value}}}
        </div>
      {{/calendarData}}
    </div>

    <script>
      var names = [];
      {{#calendarData}}
        names.push("{{key}}");
      {{/calendarData}}
    </script>

    <script src='/js/index.js'></script>

    <script>
      {{^playbutton}}
      songOfGitHub.init(true);
      {{/playbutton}}
      {{#playbutton}}
      songOfGitHub.init();
      {{/playbutton}}

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-37501388-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
